{% extends "content_management_base.html" %}
{% load static %}

{% block title %}
{% if project.title %}
Update Project: {{ project.title }}
{% else %}
New Project
{% endif %}
{% endblock %}

{% block breadcrumb %}
<li class="flex items-center">
    <a href="{% url 'project_list' %}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200">Projects</a>
    <i class="fas fa-chevron-right h-5 w-5 content-center text-gray-400 dark:text-gray-500 mx-2"></i>
</li>
<li class="flex items-center">
    {% if project.title %}
    <span class="text-gray-500 dark:text-gray-400">{{ project.title }}</span>
    {% else %}
    <span class="text-gray-500 dark:text-gray-400">New Project</span>
    {% endif %}
</li>
{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Project Form Header -->
    {% if project.title %}
    <div class="bg-gradient-to-r from-emerald-600 to-teal-600 rounded-lg shadow-lg overflow-hidden mb-8">
        <div class="px-6 py-8 text-white">
            <div class="flex items-center">
                <div class="flex-shrink-0 mr-4">
                    <i class="fas fa-edit text-4xl text-emerald-200 content-center"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold mb-2">Update Project</h1>
                    <p class="text-emerald-100">{{ project.title|truncatechars:80 }}</p>
                    <p class="text-emerald-200 text-sm mt-1">Modify existing volunteer opportunity</p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="bg-gradient-to-r from-emerald-600 to-teal-600 rounded-lg shadow-lg overflow-hidden mb-8">
        <div class="px-6 py-8 text-white">
            <div class="flex items-center">
                <div class="flex-shrink-0 mr-4">
                    <i class="fas fa-plus-circle text-4xl text-emerald-200 content-center"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold mb-2">Create New Project</h1>
                    <p class="text-emerald-100">Add a new volunteer opportunity to the platform</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="bg-card-bg-light dark:bg-card-bg-dark shadow-lg rounded-lg border border-border-light dark:border-border-dark overflow-hidden">
        <div class="px-6 py-4 bg-gray-50 dark:bg-gray-800 border-b border-border-light dark:border-border-dark">
            <h2 class="text-lg font-semibold text-text-light dark:text-text-dark flex items-center">
                <i class="fas fa-project-diagram text-primary-blue mr-2 content-center"></i>
                {% if project.title %}Edit Project Details{% else %}Project Information{% endif %}
            </h2>
        </div>

        <form method="post" enctype="multipart/form-data" class="p-6 space-y-8">
            {% csrf_token %}

            <!-- Basic Information Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-info-circle text-emerald-600 mr-2 content-center"></i>
                    Basic Information
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Title Field -->
                    <div class="md:col-span-2">
                        <label for="{{ form.title.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-heading text-blue-600 mr-2 content-center"></i>
                            {{ form.title.label_tag }}
                            {% if form.title.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="text" name="{{ form.title.name }}" id="{{ form.title.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-blue-500 focus:ring-blue-500 focus:bg-blue-50 dark:focus:bg-blue-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.title.value %}{{ form.title.value }}{% endif %}"
                               placeholder="Enter a compelling project title..."
                               {% if form.title.field.required %}required{% endif %}>
                        {% if form.title.errors %}
                            <div class="mt-2">
                                {% for error in form.title.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">This will be the main headline displayed to volunteers</p>
                    </div>

                    <!-- KICC Project ID -->
                    <div>
                        <label for="{{ form.kicc_project_id.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-id-card text-purple-600 mr-2 content-center"></i>
                            {{ form.kicc_project_id.label_tag }}
                        </label>
                        <input type="text" name="{{ form.kicc_project_id.name }}" id="{{ form.kicc_project_id.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-purple-500 focus:ring-purple-500 focus:bg-purple-50 dark:focus:bg-purple-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.kicc_project_id.value %}{{ form.kicc_project_id.value }}{% endif %}"
                               placeholder="External system project ID">
                        {% if form.kicc_project_id.errors %}
                            <div class="mt-2">
                                {% for error in form.kicc_project_id.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">ID from external KICC system</p>
                    </div>

                    <!-- Country -->
                    <div>
                        <label for="{{ form.country.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-globe text-green-600 mr-2 content-center"></i>
                            {{ form.country.label_tag }}
                            {% if form.country.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="text" name="{{ form.country.name }}" id="{{ form.country.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-green-500 focus:ring-green-500 focus:bg-green-50 dark:focus:bg-green-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.country.value %}{{ form.country.value }}{% endif %}"
                               placeholder="Country where project takes place"
                               {% if form.country.field.required %}required{% endif %}>
                        {% if form.country.errors %}
                            <div class="mt-2">
                                {% for error in form.country.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Theme -->
                    <div>
                        <label for="{{ form.theme.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-tags text-orange-600 mr-2 content-center"></i>
                            {{ form.theme.label_tag }}
                            {% if form.theme.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="text" name="{{ form.theme.name }}" id="{{ form.theme.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-orange-500 focus:ring-orange-500 focus:bg-orange-50 dark:focus:bg-orange-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.theme.value %}{{ form.theme.value }}{% endif %}"
                               placeholder="e.g., Education, Medical, Environment"
                               {% if form.theme.field.required %}required{% endif %}>
                        {% if form.theme.errors %}
                            <div class="mt-2">
                                {% for error in form.theme.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Category for filtering and organization</p>
                    </div>

                    <!-- Difficulty -->
                    <div>
                        <label for="{{ form.difficulty.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-chart-line text-red-600 mr-2 content-center"></i>
                            {{ form.difficulty.label_tag }}
                            {% if form.difficulty.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <select name="{{ form.difficulty.name }}" id="{{ form.difficulty.id_for_label }}"
                                class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                       focus:border-red-500 focus:ring-red-500 focus:bg-red-50 dark:focus:bg-red-900/20
                                       dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                                {% if form.difficulty.field.required %}required{% endif %}>
                            <option value="">Select difficulty level...</option>
                            <option value="Easy" {% if form.difficulty.value == "Easy" %}selected{% endif %}>Easy</option>
                            <option value="Medium" {% if form.difficulty.value == "Medium" %}selected{% endif %}>Medium</option>
                            <option value="Hard" {% if form.difficulty.value == "Hard" %}selected{% endif %}>Hard</option>
                        </select>
                        {% if form.difficulty.errors %}
                            <div class="mt-2">
                                {% for error in form.difficulty.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Skill level required for participants</p>
                    </div>
                </div>
            </div>

            <!-- Capacity & Duration Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-users text-indigo-600 mr-2 content-center"></i>
                    Capacity & Duration
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Duration -->
                    <div>
                        <label for="{{ form.duration.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-clock text-cyan-600 mr-2 content-center"></i>
                            {{ form.duration.label_tag }}
                            {% if form.duration.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="number" name="{{ form.duration.name }}" id="{{ form.duration.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-cyan-500 focus:ring-cyan-500 focus:bg-cyan-50 dark:focus:bg-cyan-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.duration.value %}{{ form.duration.value }}{% endif %}"
                               placeholder="120"
                               min="1"
                               {% if form.duration.field.required %}required{% endif %}>
                        {% if form.duration.errors %}
                            <div class="mt-2">
                                {% for error in form.duration.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Total hours required</p>
                    </div>

                    <!-- Total Headcount -->
                    <div>
                        <label for="{{ form.total_headcount.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-users text-emerald-600 mr-2 content-center"></i>
                            {{ form.total_headcount.label_tag }}
                            {% if form.total_headcount.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="number" name="{{ form.total_headcount.name }}" id="{{ form.total_headcount.id_for_label }}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-emerald-500 focus:ring-emerald-500 focus:bg-emerald-50 dark:focus:bg-emerald-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               value="{% if form.total_headcount.value %}{{ form.total_headcount.value }}{% endif %}"
                               placeholder="25"
                               min="1"
                               {% if form.total_headcount.field.required %}required{% endif %}>
                        {% if form.total_headcount.errors %}
                            <div class="mt-2">
                                {% for error in form.total_headcount.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Maximum volunteers allowed</p>
                    </div>

                    <!-- Current Headcount (Read-only display) -->
                    <div>
                        <label class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-user-check text-blue-600 mr-2 content-center"></i>
                            Current Enrollments
                        </label>
                        <div class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-lg">
                            {% if form.instance.headcount %}
                                {{ form.instance.headcount }} / {{ form.instance.total_headcount|default:0 }}
                            {% else %}
                                0 / {{ form.instance.total_headcount|default:0 }}
                            {% endif %}
                        </div>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Current vs maximum capacity</p>
                    </div>
                </div>
            </div>

            <!-- Scheduling Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-calendar-alt text-rose-600 mr-2 content-center"></i>
                    Scheduling & Deadlines
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Application Deadline -->
                    <div>
                        <label for="{{ form.application_deadline.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-calendar-times text-red-600 mr-2 content-center"></i>
                            {{ form.application_deadline.label_tag }}
                            {% if form.application_deadline.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <input type="datetime-local" name="{{ form.application_deadline.name }}" id="{{ form.application_deadline.id_for_label }}"
                               value="{% if form.application_deadline.value %}{{ form.application_deadline.value|date:'Y-m-d\\TH:i' }}{% endif %}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-red-500 focus:ring-red-500 focus:bg-red-50 dark:focus:bg-red-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                               {% if form.application_deadline.field.required %}required{% endif %}>
                        {% if form.application_deadline.errors %}
                            <div class="mt-2">
                                {% for error in form.application_deadline.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">When applications close</p>
                    </div>

                    <!-- Start Date -->
                    <div>
                        <label for="{{ form.start_date.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-play-circle text-green-600 mr-2 content-center"></i>
                            {{ form.start_date.label_tag }}
                        </label>
                        <input type="date" name="{{ form.start_date.name }}" id="{{ form.start_date.id_for_label }}"
                               value="{% if form.start_date.value %}{{ form.start_date.value|date:'Y-m-d' }}{% endif %}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-green-500 focus:ring-green-500 focus:bg-green-50 dark:focus:bg-green-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg">
                        {% if form.start_date.errors %}
                            <div class="mt-2">
                                {% for error in form.start_date.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">When the project begins</p>
                    </div>

                    <!-- End Date -->
                    <div>
                        <label for="{{ form.end_date.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-stop-circle text-orange-600 mr-2 content-center"></i>
                            {{ form.end_date.label_tag }}
                        </label>
                        <input type="date" name="{{ form.end_date.name }}" id="{{ form.end_date.id_for_label }}"
                               value="{% if form.end_date.value %}{{ form.end_date.value|date:'Y-m-d' }}{% endif %}"
                               class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                      focus:border-orange-500 focus:ring-orange-500 focus:bg-orange-50 dark:focus:bg-orange-900/20
                                      dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg">
                        {% if form.end_date.errors %}
                            <div class="mt-2">
                                {% for error in form.end_date.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">When the project ends</p>
                    </div>
                </div>
            </div>

            <!-- Status Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-toggle-on text-violet-600 mr-2 content-center"></i>
                    Status & Visibility
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Is Active -->
                    <div class="space-y-2">
                        <label for="{{ form.is_active.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-power-off text-green-600 mr-2 content-center"></i>
                            {{ form.is_active.label_tag }}
                        </label>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" name="{{ form.is_active.name }}" id="{{ form.is_active.id_for_label }}"
                                   class="h-5 w-5 text-green-600 focus:ring-green-500 border-gray-300 dark:border-gray-600 rounded transition-all duration-200"
                                   {% if form.is_active.value %}checked{% endif %}>
                            <div class="flex-1">
                                <span class="text-sm text-gray-700 dark:text-gray-300">Project is active and accepting applications</span>
                                {% if form.is_active.errors %}
                                    <div class="mt-1">
                                        {% for error in form.is_active.errors %}
                                            <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                                <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                            </p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Inactive projects are hidden from users</p>
                            </div>
                        </div>
                    </div>

                    <!-- Is Hero Highlight -->
                    <div class="space-y-2">
                        <label for="{{ form.is_hero_highlight.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-star text-yellow-600 mr-2 content-center"></i>
                            {{ form.is_hero_highlight.label_tag }}
                        </label>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" name="{{ form.is_hero_highlight.name }}" id="{{ form.is_hero_highlight.id_for_label }}"
                                   class="h-5 w-5 text-yellow-600 focus:ring-yellow-500 border-gray-300 dark:border-gray-600 rounded transition-all duration-200"
                                   {% if form.is_hero_highlight.value %}checked{% endif %}>
                            <div class="flex-1">
                                <span class="text-sm text-gray-700 dark:text-gray-300">Feature this project in the hero carousel</span>
                                {% if form.is_hero_highlight.errors %}
                                    <div class="mt-1">
                                        {% for error in form.is_hero_highlight.errors %}
                                            <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                                <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                            </p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Showcase this project prominently in the hero carousel</p>
                            </div>
                        </div>
                    </div>

                    <!-- Is Featured -->
                    <div class="space-y-2">
                        <label for="{{ form.is_featured.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-heart text-rose-600 mr-2 content-center"></i>
                            {{ form.is_featured.label_tag }}
                        </label>
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" name="{{ form.is_featured.name }}" id="{{ form.is_featured.id_for_label }}"
                                   class="h-5 w-5 text-rose-600 focus:ring-rose-500 border-gray-300 dark:border-gray-600 rounded transition-all duration-200"
                                   {% if form.is_featured.value %}checked{% endif %}>
                            <div class="flex-1">
                                <span class="text-sm text-gray-700 dark:text-gray-300">Mark as a featured project</span>
                                {% if form.is_featured.errors %}
                                    <div class="mt-1">
                                        {% for error in form.is_featured.errors %}
                                            <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                                <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                            </p>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Featured projects appear in a special highlighted section</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-file-alt text-blue-600 mr-2 content-center"></i>
                    Project Content
                </h3>

                <div class="space-y-6">
                    <!-- Teaser -->
                    <div>
                        <label for="{{ form.teaser.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-quote-left text-indigo-600 mr-2 content-center"></i>
                            {{ form.teaser.label_tag }}
                            {% if form.teaser.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <textarea name="{{ form.teaser.name }}" id="{{ form.teaser.id_for_label }}" rows="4"
                                  class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                         focus:border-indigo-500 focus:ring-indigo-500 focus:bg-indigo-50 dark:focus:bg-indigo-900/20
                                         dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-base leading-relaxed"
                                  placeholder="Write a compelling short description that will attract volunteers..."
                                  {% if form.teaser.field.required %}required{% endif %}>{% if form.teaser.value %}{{ form.teaser.value }}{% endif %}</textarea>
                        {% if form.teaser.errors %}
                            <div class="mt-2">
                                {% for error in form.teaser.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Brief overview shown in project cards and listings</p>
                    </div>

                    <!-- Background & Objectives -->
                    <div>
                        <label for="{{ form.background_objectives.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-bullseye text-emerald-600 mr-2 content-center"></i>
                            {{ form.background_objectives.label_tag }}
                            {% if form.background_objectives.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <textarea name="{{ form.background_objectives.name }}" id="{{ form.background_objectives.id_for_label }}" rows="6"
                                  class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                         focus:border-emerald-500 focus:ring-emerald-500 focus:bg-emerald-50 dark:focus:bg-emerald-900/20
                                         dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-base leading-relaxed"
                                  placeholder="Describe the project's background, goals, and what volunteers will accomplish..."
                                  {% if form.background_objectives.field.required %}required{% endif %}>{% if form.background_objectives.value %}{{ form.background_objectives.value }}{% endif %}</textarea>
                        {% if form.background_objectives.errors %}
                            <div class="mt-2">
                                {% for error in form.background_objectives.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Detailed description of the project's purpose and objectives</p>
                    </div>

                    <!-- Tasks & Eligibility -->
                    <div>
                        <label for="{{ form.tasks_eligibility.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                            <i class="fas fa-tasks text-cyan-600 mr-2 content-center"></i>
                            {{ form.tasks_eligibility.label_tag }}
                            {% if form.tasks_eligibility.field.required %}
                                <span class="text-red-500 ml-1">*</span>
                            {% endif %}
                        </label>
                        <textarea name="{{ form.tasks_eligibility.name }}" id="{{ form.tasks_eligibility.id_for_label }}" rows="6"
                                  class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                         focus:border-cyan-500 focus:ring-cyan-500 focus:bg-cyan-50 dark:focus:bg-cyan-900/20
                                         dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-base leading-relaxed"
                                  placeholder="Describe specific tasks volunteers will perform and any requirements or qualifications needed..."
                                  {% if form.tasks_eligibility.field.required %}required{% endif %}>{% if form.tasks_eligibility.value %}{{ form.tasks_eligibility.value }}{% endif %}</textarea>
                        {% if form.tasks_eligibility.errors %}
                            <div class="mt-2">
                                {% for error in form.tasks_eligibility.errors %}
                                    <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                    </p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">What volunteers will do and who can participate</p>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="space-y-6">
                <h3 class="text-lg font-semibold text-text-light dark:text-text-dark border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center">
                    <i class="fas fa-images text-pink-600 mr-2 content-center"></i>
                    Project Media
                </h3>

                <!-- Cover Image Field -->
                <div class="space-y-2">
                    <label for="{{ form.cover_image.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                        <i class="fas fa-image text-orange-600 mr-2 content-center"></i>
                        {{ form.cover_image.label_tag }}
                    </label>
                    <input type="file" name="{{ form.cover_image.name }}" id="{{ form.cover_image.id_for_label }}"
                        class="block w-full px-4 py-3 text-sm text-gray-500 dark:text-gray-400
                                file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0
                                file:text-sm file:font-semibold file:bg-orange-500 file:text-white
                                hover:file:bg-orange-600 dark:file:bg-orange-600 dark:hover:file:bg-orange-500
                                cursor-pointer transition-all duration-200 border border-gray-300 dark:border-gray-600 rounded-lg">
                    {% if form.cover_image.value %}
                        <div id="{{ form.cover_image.id_for_label }}_current" class="mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
                            <p class="text-sm text-gray-600 dark:text-gray-400 flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-1 content-center"></i>
                                Current: <a href="{{ form.cover_image.value.url }}" target="_blank" class="text-orange-600 hover:text-orange-700 font-medium">{{ form.cover_image.value.name }}</a>
                            </p>
                        </div>
                        <button type="button" id="clear-cover-image" class="mt-2 inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-orange-700 bg-orange-100 hover:bg-orange-200 dark:bg-orange-900 dark:text-orange-300 dark:hover:bg-orange-800 transition-colors duration-200">
                            <i class="fas fa-times mr-1 content-center"></i>Clear Image
                        </button>
                        <input type="checkbox" name="{{ form.cover_image.name }}-clear" id="{{ form.cover_image.id_for_label }}_clear" style="display:none">
                    {% endif %}
                    {% if form.cover_image.errors %}
                        <div class="mt-2">
                            {% for error in form.cover_image.errors %}
                                <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                    <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                </p>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Upload a cover image or provide a URL below</p>
                </div>

                <!-- Cover Image URL Field -->
                <div class="space-y-2">
                    <label for="{{ form.cover_image_url.id_for_label }}" class="block text-sm font-semibold text-text-light dark:text-text-dark flex items-center">
                        <i class="fas fa-link text-teal-600 mr-2 content-center"></i>
                        {{ form.cover_image_url.label_tag }}
                    </label>
                    <input type="url" name="{{ form.cover_image_url.name }}" id="{{ form.cover_image_url.id_for_label }}"
                        class="block w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm
                                focus:border-teal-500 focus:ring-teal-500 focus:bg-teal-50 dark:focus:bg-teal-900/20
                                dark:bg-gray-800 dark:text-gray-200 transition-all duration-200 text-lg"
                        value="{% if form.cover_image_url.value %}{{ form.cover_image_url.value }}{% endif %}"
                        placeholder="https://example.com/image.jpg">
                    {% if form.cover_image_url.errors %}
                        <div class="mt-2">
                            {% for error in form.cover_image_url.errors %}
                                <p class="text-sm text-red-600 dark:text-red-400 flex items-center">
                                    <i class="fas fa-exclamation-triangle mr-1 content-center"></i>{{ error }}
                                </p>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Alternative to uploading: provide a direct link to an image</p>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-6 border-t border-border-light dark:border-border-dark">
                <a href="{% url 'project_list' %}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-lg shadow-sm text-text-light dark:text-text-dark bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-arrow-left mr-2 content-center"></i>
                    Cancel
                </a>
                <button type="submit" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-300 transform hover:scale-105">
                    <i class="fas fa-save mr-2 content-center"></i>
                    {% if project.title %}Update Project{% else %}Create Project{% endif %}
                </button>
            </div>
        </form>
    </div>

    <!-- Help Section -->
    <div class="mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
        <div class="flex">
            <div class="flex-shrink-0">
                <i class="fas fa-info-circle text-blue-600 dark:text-blue-400 content-center"></i>
            </div>
            <div class="ml-3">
                <h3 class="text-sm font-medium text-blue-800 dark:text-blue-200">Project Creation Tips</h3>
                <div class="mt-2 text-sm text-blue-700 dark:text-blue-300">
                    <ul class="list-disc list-inside space-y-1">
                        <li>Use clear, compelling titles that highlight the impact</li>
                        <li>Provide realistic duration and capacity estimates</li>
                        <li>Write detailed descriptions that help volunteers understand the commitment</li>
                        <li>Set appropriate application deadlines to allow proper planning</li>
                        <li>Include high-quality cover images to attract more volunteers</li>
                        <li>Be specific about tasks and eligibility requirements</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const coverImageInput = document.getElementById('{{ form.cover_image.id_for_label }}');
        const coverImageUrlInput = document.getElementById('{{ form.cover_image_url.id_for_label }}');

        // Ensure only one of the fields is filled
        coverImageInput.addEventListener('change', function() {
            if (coverImageInput.value) {
                coverImageUrlInput.value = '';
            }
        });

        coverImageUrlInput.addEventListener('input', function() {
            if (coverImageUrlInput.value) {
                coverImageInput.value = '';
            }
        });

        // Clear uploaded cover image (if present)
        const clearCoverBtn = document.getElementById('clear-cover-image');
        if (clearCoverBtn) {
            clearCoverBtn.addEventListener('click', function() {
                if (coverImageInput) coverImageInput.value = '';
                const clearCheckbox = document.getElementById('{{ form.cover_image.id_for_label }}_clear');
                if (clearCheckbox) clearCheckbox.checked = true;
                // Optionally hide the current file display
                clearCoverBtn.style.display = 'none';
            });
        }
    });
</script>
{% endblock %}
