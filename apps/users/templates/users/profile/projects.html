{% load i18n %}
<div class="bg-light-secondary-bg dark:bg-dark-secondary-bg rounded-2xl shadow-lg p-8 animate-fadeIn border border-border-light dark:border-border-dark" style="animation-delay: 0.4s">
    <div class="flex items-center mb-6">
        <div class="h-10 w-10 rounded-full bg-primary-blue bg-opacity-10 flex items-center justify-center mr-4">
            <i class="fas fa-project-diagram text-primary-blue content-center"></i>
        </div>
        <h2 class="text-2xl font-bold text-text-light dark:text-text-dark">{% trans "My Projects" %}</h2>
    </div>

    {% if upcoming_projects %}
    <div class="mb-6">
        <h3 class="text-lg font-semibold text-primary-blue mb-4 flex items-center">
            <i class="fas fa-clock mr-2 content-center"></i>{% trans "Upcoming Projects" %}
        </h3>
        <div class="space-y-3">
            {% for project in upcoming_projects %}
            <div class="bg-light-bg dark:bg-dark-bg rounded-xl p-4 border-l-4 border-primary-blue hover:shadow-md transition-all duration-300">
                <a href="{% url 'content_project_detail' project.pk %}" class="block">
                    <div class="font-semibold text-text-light dark:text-text-dark hover:text-primary-blue mb-1 break-words">{{ project.title }}</div>
                    <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary flex items-center">
                        <i class="fas fa-calendar-alt mr-1 content-center"></i>{% trans "Starts:" %} {{ project.start_date|date:"M d, Y" }}
                    </p>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if current_projects %}
    <div class="mb-6">
        <h3 class="text-lg font-semibold text-success mb-4 flex items-center">
            <i class="fas fa-play-circle mr-2 content-center"></i>{% trans "Current Projects" %}
        </h3>
        <div class="space-y-3">
            {% for project in current_projects %}
            <div class="bg-light-bg dark:bg-dark-bg rounded-xl p-4 border-l-4 border-success hover:shadow-md transition-all duration-300">
                <a href="{% url 'content_project_detail' project.pk %}" class="block">
                    <div class="font-semibold text-text-light dark:text-text-dark hover:text-success mb-1 break-words">{{ project.title }}</div>
                    <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary flex items-center">
                        <i class="fas fa-calendar-check mr-1 content-center"></i>{% trans "Ends:" %} {{ project.end_date|date:"M d, Y" }}
                    </p>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if past_projects %}
    <div class="mb-6">
        <h3 class="text-lg font-semibold text-text-light-secondary dark:text-text-dark-secondary mb-4 flex items-center">
            <i class="fas fa-check-circle mr-2 content-center"></i>{% trans "Past Projects" %}
        </h3>
        <div class="space-y-3">
            {% for project in past_projects %}
            <div class="bg-light-bg dark:bg-dark-bg rounded-xl p-4 border-l-4 border-text-light-secondary dark:border-text-dark-secondary hover:shadow-md transition-all duration-300">
                <a href="{% url 'content_project_detail' project.pk %}" class="block">
                    <div class="font-semibold text-text-light dark:text-text-dark hover:text-text-light-secondary dark:hover:text-text-dark-secondary mb-1 break-words">{{ project.title }}</div>
                    {% if project.end_date %}
                    <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary flex items-center">
                        <i class="fas fa-calendar-times mr-1 content-center"></i>{% trans "Ended:" %} {{ project.end_date|date:"M d, Y" }}
                    </p>
                    <div class="mt-3 pt-3 border-t border-border-light dark:border-border-dark flex justify-end">
                        {% if project.user_certificate %}
                        <a href="{% url 'view_certificate' project.user_certificate.certificate_id %}" target="_blank" class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-primary-blue hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue transition-colors" onclick="event.stopPropagation();">
                            <i class="fas fa-eye mr-1.5"></i>{% trans "View Certificate" %}
                        </a>
                        {% else %}
                        <form action="{% url 'generate_certificate' project.pk %}" method="post" onclick="event.stopPropagation();">
                            {% csrf_token %}
                            <button type="submit" class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-success hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-success transition-colors">
                                <i class="fas fa-certificate mr-1.5"></i>{% trans "Generate Certificate" %}
                            </button>
                        </form>
                        {% endif %}
                    </div>
                    {% endif %}
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if not upcoming_projects and not current_projects and not past_projects %}
    <div class="bg-light-bg dark:bg-dark-bg rounded-xl p-6 border border-border-light dark:border-border-dark text-center">
        <i class="fas fa-inbox text-4xl text-text-light-secondary dark:text-text-dark-secondary mb-4 content-center"></i>
        <p class="text-text-light dark:text-text-dark font-medium">{% trans "No projects enrolled yet" %}</p>
        <p class="text-sm text-text-light-secondary dark:text-text-dark-secondary mt-2">{% trans "Start your journey by enrolling in a project!" %}</p>
    </div>
    {% endif %}
</div>
