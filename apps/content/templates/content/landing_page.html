{% extends "content_base.html" %}
{% load i18n %}

{% block title %}GDA{% endblock %}

{% block breadcrumb %}
    <!-- <li class="flex items-center">
        <a href="{% url 'landing_page' %}" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200">Home</a>
    </li> -->
{% endblock %}

{% block content %}
    <!-- Hero Carousel Container -->
    <div class="relative max-w-7xl mx-auto px-4 mb-8">
        <div class="hero-carousel-container relative">
            {% if hero_projects or hero_news_events or hero_success_stories %}
            <!-- Left Navigation Arrow -->
            <button class="carousel-nav-btn carousel-nav-left absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-700 text-gray-800 dark:text-white rounded-full p-4 shadow-2xl transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-blue focus:ring-opacity-50 ml-2" aria-label="{% trans "Previous slide" %}">
                <i class="fas fa-chevron-left text-2xl"></i>
            </button>
            
            <!-- Right Navigation Arrow -->
            <button class="carousel-nav-btn carousel-nav-right absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-700 text-gray-800 dark:text-white rounded-full p-4 shadow-2xl transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-primary-blue focus:ring-opacity-50 mr-2" aria-label="{% trans "Next slide" %}">
                <i class="fas fa-chevron-right text-2xl"></i>
            </button>
            {% endif %}
        
            <div class="hero-carousel rounded-2xl shadow-2xl overflow-hidden">
                <!-- Default Hero Slide -->
                <div class="carousel-slide relative h-[60vh]">
                    <div class="absolute inset-0 bg-gradient-to-br from-primary-blue via-accent-blue to-blue-600 dark:from-blue-800 dark:via-blue-700 dark:to-blue-900"></div>
                    
                    <!-- Background Pattern -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-10 left-10 w-32 h-32 bg-white rounded-full animate-pulse"></div>
                        <div class="absolute top-40 right-20 w-24 h-24 bg-white rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                        <div class="absolute bottom-20 left-1/4 w-16 h-16 bg-white rounded-full animate-pulse" style="animation-delay: 2s;"></div>
                    </div>
                    
                    <!-- Content -->
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="w-full p-8 text-white text-center">
                            <div class="max-w-3xl mx-auto">
                                <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold mb-6 animate-fade-in-up bg-clip-text text-transparent bg-gradient-to-r from-white to-blue-100 line-clamp-2 ellipsis-title">
                                    {% trans "Make a Difference" %}<br>
                                    <span class="text-yellow-300">{% trans "Today" %}</span>
                                </h1>
                                <p class="text-lg md:text-xl lg:text-2xl mb-10 leading-relaxed opacity-95 animate-fade-in line-clamp-2 ellipsis-subtitle">
                                    {% trans "Join our community of volunteers and contribute to meaningful projects that impact lives." %}
                                </p>
                                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                                    <a href="#latest-projects" class="group inline-flex items-center bg-white text-primary-blue font-bold py-4 px-8 rounded-full shadow-full transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-white focus:ring-opacity-50">
                                        <i class="fas fa-arrow-down animate-pulse content-center"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hero Project Slides -->
                {% for project in hero_projects %}
                <div class="carousel-slide relative h-[60vh]">
                    <!-- Background Image or Gradient -->
                    {% if project.cover_image_blob %}
                        <img src="{% url 'content_serve_blob' 'project' project.pk 'cover_image_blob' %}" 
                                alt="{{ project.title }}" 
                                class="absolute inset-0 w-full h-full object-cover">
                    {% elif project.cover_image %}
                        <img src="{{ project.cover_image.url }}" 
                                alt="{{ project.title }}" 
                                class="absolute inset-0 w-full h-full object-cover">
                    {% elif project.cover_image_url %}
                        <img src="{{ project.cover_image_url }}" 
                                alt="{{ project.title }}" 
                                class="absolute inset-0 w-full h-full object-cover">
                    {% else %}
                        <!-- Background Gradient -->
                        <div class="absolute inset-0 bg-gradient-to-br from-primary-blue via-accent-blue to-blue-600 dark:from-blue-800 dark:via-blue-700 dark:to-blue-900"></div>
                        
                        <!-- Background Pattern -->
                        <div class="absolute inset-0 opacity-10">
                            <div class="absolute top-10 left-10 w-32 h-32 bg-white rounded-full animate-pulse"></div>
                            <div class="absolute top-40 right-20 w-24 h-24 bg-white rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                            <div class="absolute bottom-20 left-1/4 w-16 h-16 bg-white rounded-full animate-pulse" style="animation-delay: 2s;"></div>
                        </div>
                    {% endif %}
                    
                    <!-- Overlay Gradient -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"></div>
                    
                    <!-- Content -->
                    <div class="absolute inset-0 flex items-end">
                        <div class="w-full p-8 text-white">
                            <div class="max-w-3xl mx-auto">
                                <h2 class="text-3xl md:text-4xl font-bold mb-4 line-clamp-2 ellipsis-title">{{ project.title }}</h2>
                                <p class="text-lg opacity-90 line-clamp-2 ellipsis-subtitle mb-4">{{ project.teaser }}</p>
                                
                                <a href="{% url 'content_project_detail' project.pk %}" 
                                    class="inline-block mt-2 px-8 py-3 bg-white text-primary-blue font-bold rounded-full 
                                            hover:bg-blue-50 transition-all duration-300 transform hover:scale-105">
                                    {% trans "Learn More & Apply" %}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

                <!-- Hero News & Events Slides -->
                {% for item in hero_news_events %}
                <div class="carousel-slide relative h-[60vh]">
                    <!-- Background Image or Gradient -->
                    {% if item.cover_image_blob %}
                        <img src="{% url 'content_serve_blob' 'news_event' item.pk 'cover_image_blob' %}" 
                            alt="{{ item.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% elif item.cover_image %}
                        <img src="{{ item.cover_image.url }}" 
                            alt="{{ item.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% elif item.cover_image_url %}
                        <img src="{{ item.cover_image_url }}" 
                            alt="{{ item.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% else %}
                        <!-- Background Gradient -->
                        <div class="absolute inset-0 bg-gradient-to-br from-primary-blue via-accent-blue to-blue-600 dark:from-blue-800 dark:via-blue-700 dark:to-blue-900"></div>
                        
                        <!-- Background Pattern -->
                        <div class="absolute inset-0 opacity-10">
                            <div class="absolute top-10 left-10 w-32 h-32 bg-white rounded-full animate-pulse"></div>
                            <div class="absolute top-40 right-20 w-24 h-24 bg-white rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                            <div class="absolute bottom-20 left-1/4 w-16 h-16 bg-white rounded-full animate-pulse" style="animation-delay: 2s;"></div>
                        </div>
                    {% endif %}
                    
                    <!-- Overlay Gradient -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"></div>
                    
                    <!-- Content -->
                    <div class="absolute inset-0 flex items-end">
                        <div class="w-full p-8 text-white">
                            <div class="max-w-3xl mx-auto">
                                <span class="inline-block px-4 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold mb-3">
                                    {{ item.get_content_type_display }}
                                </span>
                                <h2 class="text-3xl md:text-4xl font-bold mb-4 line-clamp-2 ellipsis-title">{{ item.title }}</h2>
                                <p class="text-lg opacity-90 line-clamp-2 ellipsis-subtitle mb-2">{{ item.body|truncatewords:30 }}</p>
                                <p class="text-sm opacity-75 mb-4">
                                    <i class="fas fa-calendar-alt mr-2"></i>{{ item.publish_date|date:"F d, Y" }}
                                </p>
                                <a href="{% url 'content_news_event_detail' item.pk %}" 
                                class="inline-block mt-2 px-8 py-3 bg-white text-primary-blue font-bold rounded-full 
                                        hover:bg-blue-50 transition-all duration-300 transform hover:scale-105">
                                    {% trans "Read More" %}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

                <!-- Hero Success Stories Slides -->
                {% for story in hero_success_stories %}
                <div class="carousel-slide relative h-[60vh]">
                    <!-- Background Image or Gradient -->
                    {% if story.cover_image_blob %}
                        <img src="{% url 'content_serve_blob' 'success_story' story.pk 'cover_image_blob' %}" 
                            alt="{{ story.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% elif story.cover_image %}
                        <img src="{{ story.cover_image.url }}" 
                            alt="{{ story.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% elif story.cover_image_url %}
                        <img src="{{ story.cover_image_url }}" 
                            alt="{{ story.title }}" 
                            class="absolute inset-0 w-full h-full object-cover">
                    {% else %}
                        <!-- Background Gradient -->
                        <div class="absolute inset-0 bg-gradient-to-br from-primary-blue via-accent-blue to-blue-600 dark:from-blue-800 dark:via-blue-700 dark:to-blue-900"></div>
                        
                        <!-- Background Pattern -->
                        <div class="absolute inset-0 opacity-10">
                            <div class="absolute top-10 left-10 w-32 h-32 bg-white rounded-full animate-pulse"></div>
                            <div class="absolute top-40 right-20 w-24 h-24 bg-white rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                            <div class="absolute bottom-20 left-1/4 w-16 h-16 bg-white rounded-full animate-pulse" style="animation-delay: 2s;"></div>
                        </div>
                    {% endif %}
                    
                    <!-- Overlay Gradient -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"></div>
                    
                    <!-- Content -->
                    <div class="absolute inset-0 flex items-end">
                        <div class="w-full p-8 text-white">
                            <div class="max-w-3xl mx-auto">
                                <h2 class="text-3xl md:text-4xl font-bold mb-4 line-clamp-2 ellipsis-title">{{ story.title }}</h2>
                                <p class="text-lg opacity-90 line-clamp-2 ellipsis-subtitle mb-2">{{ story.body|truncatewords:30 }}</p>
                                <a href="{% url 'content_success_story_detail' story.pk %}" 
                                class="inline-block mt-2 px-8 py-3 bg-white text-primary-blue font-bold rounded-full 
                                        hover:bg-blue-50 transition-all duration-300 transform hover:scale-105">
                                    {% trans "Read Full Story" %}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            {% if hero_projects or hero_news_events or hero_success_stories %}
            <!-- Carousel Navigation Dots -->
            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10 justify-center">
                <!-- Default slide dot -->
                <button class="carousel-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600" 
                        data-slide="0" aria-label="{% trans "Go to slide 1" %}"></button>
                <!-- Hero projects dots -->
                {% for project in hero_projects %}
                <button class="carousel-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600" 
                        data-slide="{{ forloop.counter }}" aria-label="{% blocktrans with num=forloop.counter|add:1 %}Go to slide {{ num }}{% endblocktrans %}"></button>
                {% endfor %}
                <!-- Hero news dots -->
                {% for news in hero_news_events %}
                <button class="carousel-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600" 
                        data-slide="{{ hero_projects|length|add:forloop.counter }}" aria-label="{% blocktrans with num=hero_projects|length|add:forloop.counter|add:1 %}Go to slide {{ num }}{% endblocktrans %}"></button>
                {% endfor %}
                <!-- Hero success stories dots -->
                {% for story in hero_success_stories %}
                <button class="carousel-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600" 
                        data-slide="{{ hero_projects|length|add:hero_news_events|length|add:forloop.counter }}" aria-label="{% blocktrans with num=hero_projects|length|add:hero_news_events|length|add:forloop.counter|add:1 %}Go to slide {{ num }}{% endblocktrans %}"></button>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Featured Projects Section -->
    {% if latest_projects %}
        <section id="latest-projects" class="mb-20">
            <h2 class="text-4xl font-bold text-center mb-12 text-text-light dark:text-text-dark">{% trans "Latest Projects" %}</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for project in latest_projects %}
                {% if project.is_active %}
                    <a href="{% url 'content_project_detail' project.pk %}" class="block group bg-gradient-to-b from-white to-gray-50 dark:from-card-bg-dark dark:to-gray-800 border border-border-light dark:border-border-dark rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 ease-in-out transform hover:-translate-y-2 hover:scale-[1.02] project-card cursor-pointer">
                        <div class="relative overflow-hidden">
                            {% if project.cover_image_blob %}
                                <img src="{% url 'content_serve_blob' 'project' project.pk 'cover_image_blob' %}" alt="{{ project.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                            {% elif project.cover_image %}
                                <img src="{{ project.cover_image.url }}" alt="{{ project.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                            {% elif project.cover_image_url %}
                                <img src="{{ project.cover_image_url }}" alt="{{ project.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                            {% else %}
                                <div class="w-full h-56 bg-gradient-to-br from-primary-blue to-accent-blue flex items-center justify-center">
                                    <div class="text-center text-white">
                                        <i class="fas fa-image text-4xl mb-2 opacity-50"></i>
                                        <p class="text-sm opacity-75">{% trans "No Image Available" %}</p>
                                    </div>
                                </div>
                            {% endif %}
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <div class="absolute top-4 right-4 flex flex-col gap-2">
                                {% if project.is_featured %}
                                <div class="bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-primary-blue">
                                    <i class="fas fa-heart mr-1"></i>
                                    {% trans "Featured" %}
                                </div>
                                {% endif %}
                                 {% if project.is_full %}
                                    <div class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-semibold">
                                        <i class="fas fa-users mr-1"></i>
                                        {% trans "Full" %}
                                    </div>
                                {% elif project.application_deadline and project.application_deadline < now %}
                                    <div class="bg-gray-500 text-white px-3 py-1 rounded-full text-xs font-semibold">
                                        <i class="fas fa-check mr-1"></i>
                                        {% trans "Application Closed" %}
                                    </div>
                                {% elif project.application_deadline and project.application_deadline <= now|add:'604800' %}
                                    <div class="bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold">
                                        <i class="fas fa-exclamation-triangle mr-1"></i>
                                        {% trans "Deadline Soon" %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="px-3 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full">
                                    <i class="fas fa-map-marker-alt mr-1"></i>
                                    {{ project.country|default:"Global" }}
                                </span>
                                <span class="px-3 py-1 text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full">
                                    {{ project.theme|default:"General" }}
                                </span>
                                {% if project.difficulty %}
                                <span class="px-3 py-1 text-xs font-medium bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full">
                                    <i class="fas fa-chart-line mr-1"></i>
                                    {{ project.difficulty }}
                                </span>
                                {% endif %}
                            </div>
                            
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 leading-tight group-hover:text-primary-blue transition-colors duration-300">
                                {{ project.title }}
                            </h3>
                            
                            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3 flex-grow">
                                {{ project.teaser|truncatewords:25 }}
                            </p>
                            
                            <!-- Project Stats Grid -->
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-primary-blue dark:text-blue-400">{{ project.duration|default:0 }}</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide">{% trans "Hours" %}</div>
                                </div>
                                <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-green-600 dark:text-green-400">{{ project.headcount|default:0 }}/{{ project.total_headcount|default:0 }}</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide">{% trans "Volunteers" %}</div>
                                </div>
                            </div>
                            
                            <!-- Project Timeline -->
                            {% if project.start_date or project.end_date %}
                            <div class="mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                                <div class="text-sm">
                                    <div class="flex items-center text-blue-800 dark:text-blue-200 font-medium mb-1">
                                        <i class="fas fa-calendar-alt text-blue-600 dark:text-blue-400 mr-2"></i>
                                        {% trans "Project Timeline" %}
                                    </div>
                                    <div class="text-blue-700 dark:text-blue-300 text-xs pl-6">
                                        {% if project.start_date %}{{ project.start_date|date:"M d, Y" }}{% endif %}
                                        {% if project.start_date and project.end_date %} - {% endif %}
                                        {% if project.end_date %}{{ project.end_date|date:"M d, Y" }}{% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Application Deadline -->
                            {% if project.application_deadline %}
                            <div class="mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
                                <div class="flex items-center text-sm">
                                    <i class="fas fa-clock text-yellow-600 dark:text-yellow-400 mr-2"></i>
                                    <span class="text-yellow-800 dark:text-yellow-200 font-medium">{% trans "Apply by:" %}</span>
                                    <span class="text-yellow-700 dark:text-yellow-300 ml-1">{{ project.application_deadline|date:"M d, Y" }}</span>
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700">
                                <div class="flex items-center text-xs text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-calendar-alt mr-1"></i>
                                    <span>{% trans "Published:" %} {{ project.created_at|date:"M d, Y" }}</span>
                                </div>
                                <span class="group/btn inline-flex items-center bg-gradient-to-r from-primary-blue to-accent-blue hover:from-accent-blue hover:to-primary-blue text-white font-semibold py-2.5 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                                    <span class="mr-2">{% trans "View Details" %}</span>
                                    <i class="fas fa-arrow-right group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                                </span>
                            </div>
                        </div>
                    </a>
                {% endif %}
                {% endfor %}
            </div>
            <div class="text-center mt-12">
                <a href="{% url 'content_project_list' %}" class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-primary-blue hover:bg-accent-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue hover:-translate-y-3 transition-all hover:shadow-xl duration-300">
                    <i class="fas fa-folder h-5 w-5 mr-2 content-center"></i>
                    {% trans "View All Projects" %}
                </a>
            </div>
        </section>
    {% endif %}

    <!-- Latest News & Stories Section -->
    {% if latest_news_events %}
        <section id="latest-news-events" class="mb-20">
            <h2 class="text-4xl font-bold text-center mb-12 text-text-light dark:text-text-dark">{% trans "Latest News & Events" %}</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for item in latest_news_events %}
                    <a href="{% url 'content_news_event_detail' item.pk %}" class="block group bg-gradient-to-b from-white to-gray-50 dark:from-card-bg-dark dark:to-gray-800 border border-border-light dark:border-border-dark rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 ease-in-out transform hover:-translate-y-2 hover:scale-[1.02] news-event-card cursor-pointer">
                        <div class="relative overflow-hidden">
                        {% if item.cover_image_blob %}
                            <img src="{% url 'content_serve_blob' 'news_event' item.pk 'cover_image_blob' %}" alt="{{ item.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% elif item.cover_image %}
                            <img src="{{ item.cover_image.url }}" alt="{{ item.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% elif item.cover_image_url %}
                            <img src="{{ item.cover_image_url }}" alt="{{ item.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% else %}
                            <div class="w-full h-56 bg-gradient-to-br from-primary-blue to-accent-blue flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-newspaper text-4xl mb-2 opacity-50"></i>
                                    <p class="text-sm opacity-75">{% trans "No Image Available" %}</p>
                                </div>
                            </div>
                        {% endif %}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute top-4 right-4">
                            {% if item.is_featured %}
                            <div class="bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-primary-blue mb-2">
                                <i class="fas fa-heart mr-1"></i>
                                {% trans "Featured" %}
                            </div>
                            {% endif %}
                            <span class="px-3 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full">
                                {{ item.get_content_type_display }}
                            </span>
                        </div>
                        </div>
                        
                        <div class="p-6 flex-grow flex flex-col">
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 leading-tight group-hover:text-primary-blue transition-colors duration-300">
                                {{ item.title }}
                            </h3>
                            
                            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3 flex-grow">
                                {{ item.body|truncatewords:30 }}
                            </p>
                            
                            <!-- Publication Date -->
                            <div class="mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                                <div class="flex items-center text-sm">
                                    <i class="fas fa-calendar-alt text-blue-600 dark:text-blue-400 mr-2"></i>
                                    <span class="text-blue-800 dark:text-blue-200 font-medium">{% trans "Published:" %}</span>
                                    <span class="text-blue-700 dark:text-blue-300 ml-1">{{ item.publish_date|date:"M d, Y" }}</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-end pt-4 border-t border-gray-100 dark:border-gray-700">
                                <span class="group/btn inline-flex items-center bg-gradient-to-r from-primary-blue to-accent-blue hover:from-accent-blue hover:to-primary-blue text-white font-semibold py-2.5 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                                    <span class="mr-2">{% trans "Read More" %}</span>
                                    <i class="fas fa-arrow-right group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                                </span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <div class="text-center mt-12">
                <a href="{% url 'content_news_event_list' %}" class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-primary-blue hover:bg-accent-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue hover:-translate-y-3 transition-all  hover:shadow-xl duration-300">
                    <i class="fas fa-newspaper h-5 w-5 mr-2 content-center"></i>
                    {% trans "View All News & Events" %}
                </a>
            </div>
        </section>
    {% endif %}

    <!-- Latest Success Stories Section -->
    {% if latest_success_stories %}
        <section id="latest-success-stories" class="mb-20">
            <h2 class="text-4xl font-bold text-center mb-12 text-text-light dark:text-text-dark">{% trans "Latest Success Stories" %}</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for story in latest_success_stories %}
                    <a href="{% url 'content_success_story_detail' story.pk %}" class="block group bg-gradient-to-b from-white to-gray-50 dark:from-card-bg-dark dark:to-gray-800 border border-border-light dark:border-border-dark rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 ease-in-out transform hover:-translate-y-2 hover:scale-[1.02] success-story-card cursor-pointer">
                        <div class="relative overflow-hidden">
                        {% if story.cover_image_blob %}
                            <img src="{% url 'content_serve_blob' 'success_story' story.pk 'cover_image_blob' %}" alt="{{ story.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% elif story.cover_image %}
                            <img src="{{ story.cover_image.url }}" alt="{{ story.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% elif story.cover_image_url %}
                            <img src="{{ story.cover_image_url }}" alt="{{ story.title }} cover" class="w-full h-56 object-cover transform group-hover:scale-110 transition-transform duration-700">
                        {% else %}
                            <div class="w-full h-56 bg-gradient-to-br from-primary-blue to-accent-blue flex items-center justify-center">
                                <div class="text-center text-white">
                                    <i class="fas fa-trophy text-4xl mb-2 opacity-50"></i>
                                    <p class="text-sm opacity-75">{% trans "No Image Available" %}</p>
                                </div>
                            </div>
                        {% endif %}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute top-4 right-4 flex flex-col gap-2">
                            {% if story.is_featured %}
                            <div class="bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-primary-blue">
                                <i class="fas fa-heart mr-1"></i>
                                {% trans "Featured" %}
                            </div>
                            {% endif %}
                            {% if story.related_project %}
                            <span class="px-3 py-1 text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full">
                                <i class="fas fa-link mr-1"></i>{{ story.related_project.title|truncatewords:2 }}
                            </span>
                            {% endif %}
                        </div>
                        </div>
                        
                        <div class="p-6 flex-grow flex flex-col">
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 leading-tight group-hover:text-primary-blue transition-colors duration-300">
                                {{ story.title }}
                            </h3>
                            
                            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-3 flex-grow">
                                {{ story.body|truncatewords:30 }}
                            </p>
                            
                            <!-- Impact Stats Grid -->
                            {% if story.beneficiaries or story.total_hours_contributed %}
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                {% if story.beneficiaries %}
                                <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-green-600 dark:text-green-400">{{ story.beneficiaries }}</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide">{% trans "Beneficiaries" %}</div>
                                </div>
                                {% endif %}
                                {% if story.total_hours_contributed %}
                                <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-primary-blue dark:text-blue-400">{{ story.total_hours_contributed }}</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide">{% trans "Hours" %}</div>
                                </div>
                                {% endif %}
                            </div>
                            {% endif %}
                            
                            <!-- Publication Date -->
                            <div class="mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                                <div class="flex items-center text-sm">
                                    <i class="fas fa-calendar-alt text-blue-600 dark:text-blue-400 mr-2"></i>
                                    <span class="text-blue-800 dark:text-blue-200 font-medium">{% trans "Published:" %}</span>
                                    <span class="text-blue-700 dark:text-blue-300 ml-1">{{ story.published_at|date:"M d, Y" }}</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-end pt-4 border-t border-gray-100 dark:border-gray-700">
                                <span class="group/btn inline-flex items-center bg-gradient-to-r from-primary-blue to-accent-blue hover:from-accent-blue hover:to-primary-blue text-white font-semibold py-2.5 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                                    <span class="mr-2">{% trans "Read Story" %}</span>
                                    <i class="fas fa-arrow-right group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                                </span>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            <div class="text-center mt-12">
                <a href="{% url 'content_success_story_list' %}" class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-primary-blue hover:bg-accent-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue hover:-translate-y-3 hover:shadow-xl duration-300">
                    <i class="fas fa-star h-5 w-5 mr-2 content-center"></i>
                    {% trans "View All Success Stories" %}
                </a>
            </div>
        </section>
    {% endif %}

    <!-- Latest FAQs Section -->
    {% if latest_faqs %}
        <section id="latest-faqs" class="mb-20">
            <h2 class="text-4xl font-bold text-center mb-12 text-text-light dark:text-text-dark">{% trans "Frequently Asked Questions" %}</h2>
            <div class="max-w-4xl mx-auto space-y-4">
                {% for faq in latest_faqs %}
                    <div class="faq-item bg-card-bg-light dark:bg-card-bg-dark border border-border-light dark:border-border-dark rounded-xl overflow-hidden transition-all duration-300">
                        <button class="faq-question w-full px-6 py-4 text-left flex items-center justify-between cursor-pointer group hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200">
                            <h3 class="text-lg font-semibold text-primary-blue dark:text-blue-400 group-hover:text-accent-blue transition-colors duration-200">{{ faq.question }}</h3>
                            <svg class="faq-icon w-6 h-6 text-primary-blue dark:text-blue-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="faq-answer px-6 overflow-hidden max-h-0 transition-all duration-300 ease-in-out">
                            <p class="text-gray-700 dark:text-gray-300 text-base pb-6">
                                {{ faq.answer }}
                            </p>
                        </div>
                    </div>
                {% endfor %}
            </div>
             <div class="text-center mt-12">
                <a href="{% url 'content_faq_list' %}" class="inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-primary-blue hover:bg-accent-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-blue hover:-translate-y-3 transition-all  hover:shadow-xl duration-300">
                    <i class="fas fa-question-circle h-5 w-5 mr-2 content-center"></i>
                    {% trans "View All FAQs" %}
                </a>
            </div>
        </section>
    {% endif %}

    <!-- Final Call to Action Section -->
    <section class="max-w-7xl mx-auto px-4 py-16 text-center bg-gray-100 dark:bg-gray-800 rounded-lg shadow-inner">
        <h2 class="text-4xl font-bold text-primary-blue dark:text-blue-400 mb-4">
            {% trans "Ready to Make a Difference?" %}
        </h2>
        <p class="text-lg text-gray-700 dark:text-gray-300 mb-8 leading-relaxed">
            {% trans "Your time and skills can create lasting change. Explore our opportunities and join our mission." %}
        </p>
        <a href="{% url 'content_project_list' %}" class="inline-block bg-accent-blue hover:bg-primary-blue text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-accent-blue focus:ring-opacity-50">
            {% trans "Find Volunteer Opportunities" %}
        </a>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // FAQ Accordion functionality
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                const answer = item.querySelector('.faq-answer');
                const icon = item.querySelector('.faq-icon');
                
                question.addEventListener('click', () => {
                    const isOpen = answer.style.maxHeight;
                    
                    // Close all FAQ items
                    faqItems.forEach(otherItem => {
                        const otherAnswer = otherItem.querySelector('.faq-answer');
                        const otherIcon = otherItem.querySelector('.faq-icon');
                        
                        otherAnswer.style.maxHeight = null;
                        otherIcon.style.transform = 'rotate(0deg)';
                    });
                    
                    // Toggle clicked item
                    if (!isOpen) {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
            
            // Hero Carousel functionality
            const carouselContainer = document.querySelector('.hero-carousel-container');
            const carousel = document.querySelector('.hero-carousel');
            
            if (carousel && carouselContainer) {
                const slides = carousel.querySelectorAll('.carousel-slide');
                const dots = document.querySelectorAll('.carousel-dot');
                const prevBtn = document.querySelector('.carousel-nav-left');
                const nextBtn = document.querySelector('.carousel-nav-right');
                
                let currentSlide = 0;
                let interval;
                let isTransitioning = false;
                
                // Touch/swipe support
                let touchStartX = 0;
                let touchEndX = 0;
                let touchStartY = 0;
                let touchEndY = 0;
                
                // Show initial slide
                if (slides.length > 0) {
                    slides[0].classList.add('active');
                    if (dots.length > 0) dots[0].classList.add('active');
                }
                
                // Function to show a specific slide with animation
                const showSlide = (index, direction = 'next') => {
                    if (isTransitioning || slides.length === 0) return;
                    
                    isTransitioning = true;
                    const actualIndex = ((index % slides.length) + slides.length) % slides.length;
                    const prevIndex = currentSlide;
                    
                    // Remove all active and transition classes
                    slides.forEach(slide => {
                        slide.classList.remove('active', 'prev', 'next');
                    });
                    
                    // Set transition classes
                    if (direction === 'next') {
                        slides[prevIndex].classList.add('prev');
                        slides[actualIndex].classList.add('active');
                    } else {
                        slides[prevIndex].classList.add('next');
                        slides[actualIndex].classList.add('active');
                    }
                    
                    // Update dots
                    dots.forEach(dot => dot.classList.remove('active'));
                    if (dots[actualIndex]) dots[actualIndex].classList.add('active');
                    
                    currentSlide = actualIndex;
                    
                    // Reset transition lock after animation completes
                    setTimeout(() => {
                        isTransitioning = false;
                    }, 500);
                };
                
                // Next slide function
                const nextSlide = () => {
                    const next = (currentSlide + 1) % slides.length;
                    showSlide(next, 'next');
                };
                
                // Previous slide function
                const prevSlide = () => {
                    const prev = (currentSlide - 1 + slides.length) % slides.length;
                    showSlide(prev, 'prev');
                };
                
                // Navigation button handlers
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        nextSlide();
                        startAutoSlide();
                    });
                }
                
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        prevSlide();
                        startAutoSlide();
                    });
                }
                
                // Dot click handlers
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', () => {
                        showSlide(index, 'next');
                        startAutoSlide();
                    });
                });
                
                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') {
                        prevSlide();
                        startAutoSlide();
                    } else if (e.key === 'ArrowRight') {
                        nextSlide();
                        startAutoSlide();
                    }
                });
                
                // Touch event handlers for swipe
                carousel.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                    touchStartY = e.changedTouches[0].screenY;
                }, { passive: true });
                
                carousel.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    touchEndY = e.changedTouches[0].screenY;
                    handleSwipe();
                }, { passive: true });
                
                const handleSwipe = () => {
                    const swipeThreshold = 50;
                    const horizontalDiff = touchEndX - touchStartX;
                    const verticalDiff = Math.abs(touchEndY - touchStartY);
                    
                    // Only trigger swipe if horizontal movement is greater than vertical
                    if (verticalDiff < 100 && Math.abs(horizontalDiff) > swipeThreshold) {
                        if (horizontalDiff > 0) {
                            prevSlide();
                        } else {
                            nextSlide();
                        }
                        startAutoSlide();
                    }
                };
                
                // Auto-advance slides
                const startAutoSlide = () => {
                    clearInterval(interval);
                    interval = setInterval(nextSlide, 5000);
                };
                
                // Start auto-sliding
                if (slides.length > 1) {
                    startAutoSlide();
                }
                
                // Pause on hover
                carouselContainer.addEventListener('mouseenter', () => clearInterval(interval));
                carouselContainer.addEventListener('mouseleave', () => {
                    if (slides.length > 1) {
                        startAutoSlide();
                    }
                });
                
                // Pause when page is not visible
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        clearInterval(interval);
                    } else if (slides.length > 1) {
                        startAutoSlide();
                    }
                });
            }
            
            // Smooth scroll for hero section button
            const exploreButton = document.querySelector('a[href="#latest-projects"]');
            if (exploreButton) {
                exploreButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    const section = document.getElementById('latest-projects');
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
        });
    </script>

    <style>
        /* Hero Carousel Styles */
        .hero-carousel-container {
            position: relative;
        }
        
        .hero-carousel {
            position: relative;
            overflow: hidden;
            touch-action: pan-y;
        }
        
        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 500ms ease-in-out, transform 500ms ease-in-out;
            pointer-events: none;
        }
        
        .carousel-slide.active {
            position: relative;
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
            z-index: 2;
        }
        
        .carousel-slide.prev {
            transform: translateX(-100%);
            opacity: 0;
        }
        
        .carousel-slide.next {
            transform: translateX(100%);
            opacity: 0;
        }
        
        .carousel-nav-btn {
            opacity: 0;
            pointer-events: none;
            transition: opacity 300ms ease-in-out, transform 300ms ease-in-out;
        }
        
        .hero-carousel-container:hover .carousel-nav-btn {
            opacity: 1;
            pointer-events: auto;
        }
        
        .carousel-nav-btn:active {
            transform: translateY(-50%) scale(0.95);
        }
        
        .carousel-dot {
            transition: all 300ms ease-in-out;
        }
        
        .carousel-dot.active {
            background-color: white;
            transform: scale(1.3);
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .carousel-nav-btn {
                opacity: 0.7;
                pointer-events: auto;
                padding: 0.75rem;
            }
            
            .carousel-nav-btn i {
                font-size: 1.25rem;
            }
            
            .carousel-slide {
                height: 500px !important;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 1s ease-out;
        }
        
        .animate-fade-in {
            animation: fadeIn 1.2s ease-out;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .ellipsis-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }
        .ellipsis-subtitle {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
        }
    </style>
{% endblock %}